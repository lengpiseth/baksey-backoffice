{"version":3,"sources":["script.js","constant.js"],"names":["_showModalHandler","e","_currentInput","$","this","data","console","log","modal","domainName","document","location","origin","siteUrl","match","length","constant","api","media","Index","_currentMediaPage","_hasMoreMedia","_result","ready","$mediaModal","tooltip","each","index","on","event","$modalTitle","$modalBody","html","trim","ajax","method","url","page","success","response","i","mediaUrl","id","elem","filename","append","unbind","preventDefault","val","$me","$cog","$modal","addClass","removeClass","medias","animate","scrollTop","scrollHeight","prop","error","errResponse"],"mappings":"AAKA,QAAAA,mBAAAC,GACAC,cAAAC,EAAAC,MAAAC,KAAA,MACAC,QAAAC,IAAAL,eACAC,EAAA,gBAAAK,MAAA,QCRA,GAAAC,YAAAC,SAAAC,SAAAC,OACAC,QAAAJ,WAAAK,MAAA,uBAAAC,OAAA,EAAAN,WAAAA,WAAA,UAEAO,UACAC,KACAC,OACAC,MAAAN,QAAA,0BDNAO,kBAAA,EACAlB,cAAA,EACAmB,eAAA,EACAC,UAQAnB,GAAAO,UAAAa,MAAA,WACA,GAAAC,GAAArB,EAAA,eAEAA,GAAA,4BAAAsB,UAEAtB,EAAA,wBAAAuB,KAAA,SAAAC,GACAxB,EAAAC,MAAAwB,GAAA,QAAA5B,qBAGAwB,EAAAI,GAAA,gBAAA,SAAAC,GACA,GAAAC,GAAA3B,EAAA,eAAAqB,GACAO,EAAA5B,EAAA,2BAAAqB,EAEA,kBAAAM,EAAAE,OAAAF,EAAAE,OAAAF,EAAAE,KAAA,gBAEA,KAAAD,EAAAC,OAAAC,QACA9B,EAAA+B,MACAC,OAAA,MACAC,IAAApB,SAAAC,IAAAC,MAAAC,MACAd,MAAAgC,KAAA,GACAC,QAAA,SAAAC,GACAjB,QAAAiB,CAEA,KAAA,GAAAC,GAAA,EAAAA,EAAAlB,QAAAP,OAAAyB,IAAA,CACA,GAAAtB,GAAAI,QAAAkB,GACAC,EAAA5B,QAAA,eAAAK,EAAAwB,GAEAC,EAAA,sDAEAzB,EAAA0B,SAAA,UAAAH,EAAA,mCACAvB,EAAA0B,SAAA,oBAAA1B,EAAAwB,GAAA,qBAAAD,EAAA,KAAAvB,EAAA0B,SAAA,oBAIAb,GAAAc,OAAAF,GAGAxC,EAAA,4BAAAuB,KAAA,SAAAC,GACAxB,EAAAC,MAAA0C,OAAA,SAAAlB,GAAA,QAAA,SAAA3B,GACAA,EAAA8C,iBACA5C,EAAA,qBAAAD,eAAA8C,IAAA7C,EAAAC,MAAAC,KAAA,cACAmB,EAAAhB,MAAA,iBA0DAL,EAAA,oBAAAyB,GAAA,QAAA,SAAA3B,GACAA,EAAA8C,gBACA,IAAAE,GAAA9C,EAAAC,MACA8C,EAAA/C,EAAA,WAAAC,MACA+C,EAAAhD,EAAA,2BAEA+C,GAAAE,SAAA,WAEAjD,EAAA+B,MACAC,OAAA,MACAC,IAAApB,SAAAC,IAAAC,MAAAC,MACAd,MAAAgC,KAAAjB,kBAAA,GACAkB,QAAA,SAAAC,GACAW,EAAAG,YAAA,UAEA,IAAAC,GAAAf,CAEA,IAAAe,EAAAvC,OAAA,EAAA,CACAK,mBAEA,KAAA,GAAAoB,GAAA,EAAAA,EAAAc,EAAAvC,OAAAyB,IAAA,CACA,GAAAtB,GAAAoC,EAAAd,GACAC,EAAA5B,QAAA,eAAAK,EAAAwB,GAEAC,EAAA,sDAEAzB,EAAA0B,SAAA,UAAAH,EAAA,mCACAvB,EAAA0B,SAAA,qBAAA1B,EAAAwB,GAAA,qBAAAD,EAAA,KAAAvB,EAAA0B,SAAA,oBAIAzC,GAAA,iBAAA0C,OAAAF,GAGAxC,EAAA,4BAAAuB,KAAA,SAAAC,GACAxB,EAAAC,MAAA0C,OAAA,SAAAlB,GAAA,QAAA,SAAA3B,GACAA,EAAA8C,iBACA5C,EAAA,qBAAAD,eAAA8C,IAAA7C,EAAAC,MAAAC,KAAA,cACAmB,EAAAhB,MAAA,YAIA2C,EAAAI,SAAAC,UAAAL,EAAA,GAAAM,cAAA,SAEA,IAAAH,EAAAvC,SACAT,QAAAC,IAAAgC,GACAU,EAAAS,KAAA,YAAA,KAGAC,MAAA,SAAAC,GACAV,EAAAG,YAAA","file":"backend.js","sourcesContent":["var _currentMediaPage   = 1;\r\nvar _currentInput       = 0;\r\nvar _hasMoreMedia       = true;\r\nvar _result             = [];\r\n\r\nfunction _showModalHandler(e) {\r\n    _currentInput = $(this).data('id');\r\n    console.log(_currentInput);\r\n    $('#media-modal').modal(\"show\");\r\n}\r\n\r\n$(document).ready(function () {\r\n    var $mediaModal = $('#media-modal');\r\n\r\n    $('*[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n    $('span.input-group-btn').each(function (index) {\r\n        $(this).on('click', _showModalHandler);\r\n    });\r\n\r\n    $mediaModal.on('show.bs.modal', function (event) {\r\n        var $modalTitle = $('.modal-title', $mediaModal);\r\n        var $modalBody  = $('.modal-body.library-grid', $mediaModal);\r\n\r\n        ( 'Select Media' === $modalTitle.html() ) ? $modalTitle.html() : $modalTitle.html('Select Media');\r\n\r\n        if('' === $modalBody.html().trim()) {\r\n            $.ajax({\r\n                method: 'GET',\r\n                url: constant.api.media.Index,\r\n                data: {page: 1},\r\n                success: function (response) {\r\n                    _result = response;\r\n\r\n                    for(var i=0; i<_result.length; i++) {\r\n                        var media       = _result[i];\r\n                        var mediaUrl    = siteUrl + '/media/view/' + media.id;\r\n\r\n                        var elem = ('<div class=\"grid\">'+\r\n                        '<div class=\"gridInner\">'+\r\n                        '<img alt=\"'+media.filename+'\" src=\"'+mediaUrl+'\">'+\r\n                        '<div class=\"titleGrid\" title=\"'+media.filename+'\" data-media-id=\"'+media.id+'\" data-media-url=\"'+mediaUrl+'\">'+media.filename+'</div>'+\r\n                        '</div>'+\r\n                        '</div>');\r\n\r\n                        $modalBody.append(elem);\r\n                    }\r\n\r\n                    $('.library-grid .titleGrid').each(function (index) {\r\n                        $(this).unbind('click').on('click', function (e) {\r\n                            e.preventDefault();\r\n                            $('#bird_form_photos_'+_currentInput).val($(this).data('media-url'));\r\n                            $mediaModal.modal('hide');\r\n                        })\r\n                    });\r\n\r\n                    // if(response.length > 0) {\r\n                    //     _currentMediaPage += 1;\r\n                    //     _hasMoreMedia = true;\r\n                    // }\r\n                    // else {\r\n                    //     _hasMoreMedia = false;\r\n                    // }\r\n                }\r\n            });\r\n        }\r\n\r\n        // $modalBody.unbind('scroll').on('scroll', function () {\r\n        //     if($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight && _hasMoreMedia) {\r\n        //         console.log('loading more');\r\n        //         $.ajax({\r\n        //             method: 'GET',\r\n        //             url: constant.api.media.Index,\r\n        //             data: {page: _currentMediaPage},\r\n        //             success: function (response) {\r\n        //                 _result = response;\r\n        //\r\n        //                 for(var i=0; i<_result.length; i++) {\r\n        //                     var media = _result[i];\r\n        //\r\n        //                     var elem = ('<div class=\"grid\">'+\r\n        //                     '<div class=\"gridInner\">'+\r\n        //                     '<img alt=\"'+media.filename+'\" src=\"/media/view/'+media.id+'\">'+\r\n        //                     '<div class=\"titleGrid\" title=\"'+media.filename+'\" data-media-id=\"'+media.id+'\">'+media.filename+'</div>'+\r\n        //                     '</div>'+\r\n        //                     '</div>');\r\n        //\r\n        //                     $modalBody.append(elem);\r\n        //                 }\r\n        //\r\n        //                 $('.library-grid .titleGrid').each(function (index) {\r\n        //                     $(this).unbind('click').on('click', function (e) {\r\n        //                         e.preventDefault();\r\n        //                         // console.log((event.relatedTarget));\r\n        //                     })\r\n        //                 });\r\n        //\r\n        //                 if(response.length > 0) {\r\n        //                     _currentMediaPage += 1;\r\n        //                     _hasMoreMedia = true;\r\n        //                 }\r\n        //                 else {\r\n        //                     _hasMoreMedia = false;\r\n        //                 }\r\n        //             }\r\n        //         });\r\n        //     }\r\n        // });\r\n    });\r\n    \r\n    $('.load-more-media').on('click', function (e) {\r\n        e.preventDefault();\r\n        var $me  = $(this);\r\n        var $cog = $('i.fa-cog', this);\r\n        var $modal = $('.modal-body.library-grid');\r\n\r\n        $cog.addClass('fa-spin');\r\n\r\n        $.ajax({\r\n            method: 'GET',\r\n            url: constant.api.media.Index,\r\n            data: {page: _currentMediaPage + 1},\r\n            success: function (response) {\r\n                $cog.removeClass('fa-spin');\r\n\r\n                var medias = response;\r\n\r\n                if(medias.length > 0) {\r\n                    _currentMediaPage++;\r\n\r\n                    for(var i=0; i<medias.length; i++) {\r\n                        var media       = medias[i];\r\n                        var mediaUrl    = siteUrl + '/media/view/' + media.id;\r\n\r\n                        var elem = ('<div class=\"grid\">' +\r\n                        '<div class=\"gridInner\">' +\r\n                        '<img alt=\"' + media.filename + '\" src=\"'+mediaUrl+'\">' +\r\n                        '<div class=\"titleGrid\" title=\"' + media.filename + '\"  data-media-id=\"'+media.id+'\" data-media-url=\"'+mediaUrl+'\">' + media.filename + '</div>' +\r\n                        '</div>' +\r\n                        '</div>');\r\n\r\n                        $('.library-grid').append(elem);\r\n                    }\r\n\r\n                    $('.library-grid .titleGrid').each(function (index) {\r\n                        $(this).unbind('click').on('click', function (e) {\r\n                            e.preventDefault();\r\n                            $('#bird_form_photos_'+_currentInput).val($(this).data('media-url'));\r\n                            $mediaModal.modal('hide');\r\n                        })\r\n                    });\r\n\r\n                    $modal.animate({scrollTop: $modal[0].scrollHeight}, 1000);\r\n                }\r\n                else if (medias.length == 0){\r\n                    console.log(response);\r\n                    $me.prop('disabled', true);\r\n                }\r\n            },\r\n            error: function (errResponse) {\r\n                $cog.removeClass('fa-spin');\r\n            }\r\n        });\r\n    })\r\n});","var domainName  = document.location.origin;\r\nvar siteUrl     = (domainName.match(/127.0.0.1|.dev|.tk/g)).length > 0 ? domainName : domainName + \"/baksey\";\r\n\r\nvar constant = {\r\n    api : {\r\n        media: {\r\n            Index : siteUrl + '/admin/media/library'\r\n        }\r\n    }\r\n};\r\n"],"sourceRoot":"/source/"}